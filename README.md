# 成都信息工程大学 课程表

## 说在前面

还记得咱`2020`年被录取的那个暑假，不知道谁搞了一份全校的课程表在新生群里面，感觉很厉害的样子，于是乎便有了这个项目。依稀记得是那份课程表的排版并不是很好看...

不出意外的话，咱每年都会更新一下。

课程表主要是给新生了解一些专业主要会学什么，方便转专业或一些卷王同学在暑假提前了解与规划，仅供参考。更准确的课程表还是等开学自行去教务处网站下载叭。

![image-20250807152614782](assets/image-20250807152614782.png)

## 获取课程表文件

- 可以在仓库的`release`[下载](https://github.com/lovely-fafa/cuit-course-schedule/releases)
- 可以去咱的小群[736723590](https://qm.qq.com/q/cv9tlkrPJC)群文件下载

## 代码

如果你感兴趣，或者想跑跑代码什么的，可以往下看。代码或许丑陋，解决方案并非最优，毕竟敏捷开发嘛。

### 0.填入cookies

- 创建`cookies.py`文件
- 登录教务处官网（是否是校园网不影响），访问课程表并抓包获取`cookies`
- 在`cookies.py`文件中创建字典并填入键值对形式的`cookies`

```python
cookies = {
    'K': 'v'
}
```

### 1.爬取数据

> 由于课程表的信息是通过`JavaScript`渲染的，因此每一个课程表的数据是通过自动化的方式，将`JavaScript`渲染后的`html`进行保存的
>
> 教务处网站似乎有`bug`，对每一个校园依次获取课程信息才是完整数据，直接获取一个校区的数据似乎会漏数据...

- 运行代码`1_爬取.py`，该代码会使用`cookies.py`文件中的`cookies`请求教务处
- 运行完后，会发现有一个`html`文件夹，里面会有每个班级的课程表的`html`

### 2.html转pdf

> 麻爪，居然没有很舒服的开箱即用的`html`转`pdf`的包？因此使用的自动化，先网页截图，获取高度`h`，再将网页转化为高度为`h`的`pdf`（咱觉得一个课程表一页`pdf`会舒服点）

- 运行`2_html转pdf.py`，会将`html`文件夹中的`html`文件转换为`pdf`，保存在`pdf`文件夹
- 如果存在某个`html`文件对应的`pdf`文件，会跳过

### 3.合并pdf

- 运行`3_合并.py`会将`pdf`文件夹中的`pdf`合并为一个`pdf`，保存到`成信大课程表.pdf`中

注意：由于第`2`步中，并不知道对应的`pdf`的高度是多少，才可以刚好在`1`页，因此可能会存在少量`pdf`有大于`1`页，因此这一步会删除大于`1`页的`pdf`并在控制台输出警告。那么你应该回到第`2`步，将以下代码中的`+10`改为比如说`+20`。

```python
height_mm = pixel_height * mm_per_px + 10
```

改完后重新运行`2_html转pdf.py`，由于会跳过已经转为`pdf`的`html`，因此此时会对刚刚删除的，大于`1`页的`pdf`重新进行`html`转`pdf`。

运行`2_html转pdf.py`后，继续运行`3_合并.py`。如果控制台未输出警告则成功，否则需要再次将高度改大，重复上诉步骤，直到控制台未输出警告。

### 4.插入目录

> 实在不想写代码了，压力了一晚上`chatGPT o3`

- 运行`4_插入目录.py`，该程序会对`成信大课程表.pdf`添加目录，输出`成信大课程表-带目录.pdf`文件

### 5.合并封面

- 使用Adobe Acrobat DC的合并文件功能，合并封面与`成信大课程表-带目录.pdf`，注意选中保留书签选项

### 6.添加页码

> Adobe Acrobat DC罢工了，还是`chatGPT`好，写个`Python`直接就添加页码了

- 运行`5_页码.py`添加页码，注意你得先看看正文是第几页，然后改一下参数

## 学习资料

- CUIT指南：https://guide.cuit.dev
- 阿发的小群：[736723590](https://qm.qq.com/q/cv9tlkrPJC)
- 2025 CUIT学生数学建模协会新生群：[831243362](https://qm.qq.com/q/PP6oSoaVie)

## 版本迭代

- V1.1 [20250807-20250807]：新增了目录；修改了`readme.md`；删除了夹带的私货。
- v1.0 [20250727-20250728]：终于有了这个东西。

~~碎碎念：唉，凌晨~~